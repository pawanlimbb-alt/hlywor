<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Retro Gallery</title>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Inter:wght@400;600&display=swap"
    rel="stylesheet" />
  <link rel="stylesheet" href="style/gallery.css" />
</head>

<body>
  <nav>
    <div class="nav-left">
      <a href="index.html">Home</a>
      <a href="character.html">Characters</a>
      <a href="#">Projects</a>
    </div>
    <div class="nav-right">
      <a href="#">Contact</a>
    </div>
  </nav>

  <header>
    <h1>Gallery</h1>
    <p>A chaotic wall of memories — different shapes, one universe.</p>
  </header>

  <main class="free-gallery">
    <!-- Your backend will render images like this -->
    <div class="photo">
      <img src="style/images/gal1.png" alt="Photo 1">
      <div class="author">By pawan</div>
    </div>
    <div class="photo">
      <img src="style/images/gal2.png" alt="Photo 2">
      <div class="author">By R. Lee</div>
    </div>
    <div class="photo">
      <img src="style/images/New folder/IMG_20250321_141810387.jpg" alt="Photo 3">
      <div class="author">By M. Jones</div>
    </div>
    <div class="photo">
      <img src="style/images/IMG_20250527_172350033.jpg" alt="Photo 1">
      <div class="author">By A. Smith</div>
    </div>
    <div class="photo">
      <img src="style/images/IMG_20250709_181223731.jpg" alt="Photo 2">
      <div class="author">By R. Lee</div>
    </div>
    <div class="photo">
      <img src="style/images/backgroundsec1.png" alt="Photo 3">
      <div class="author">By M. Jones</div>
    </div>
    <div class="photo">
      <img src="style/images/camera.png" alt="Photo 1">
      <div class="author">By A. Smith</div>
    </div>
    <div class="photo">
      <img src="style/images/movies1.webp" alt="Photo 2">
      <div class="author">By R. Lee</div>
    </div>
    <div class="photo">
      <img src="style/images/backgroundsec1.png" alt="Photo 3">
      <div class="author">By M. Jones</div>
    </div>
  </main>

  <!-- 🔮 Lightbox Container -->
  <div id="lightbox">
    <img src="" alt="">
  </div>
  <!--Comments-->
  <section id="comment-section">
    <h3>Leave a Comment</h3>

    <form action="https://staticman3.herokuapp.com/v3/entry/github/pawanlimbb-alt/hlywor/main/comments" method="POST"
      id="comment-form">
      <input type="hidden" name="options[slug]" value="gallery" />

      <label>Your Name</label>
      <input type="text" name="fields[name]" placeholder="Your name" required>

      <label>Your Comment</label>
      <textarea name="fields[message]" placeholder="Write something..." required></textarea>

      <button type="submit">Post Comment</button>
    </form>

    <div id="comment-status"></div>

    <h3>Comments</h3>
    <div id="comments-list">Loading comments...</div>
  </section>





  <footer>
    © 2025 Retroverse Gallery
  </footer>

  <!-- ⚙️ JS: Random layout (optional) + Lightbox -->
  <script>
    // Optional random layout (delete if handled in backend)
    document.addEventListener("DOMContentLoaded", () => {
      const spanClasses = ['span-1x1', 'span-2x1', 'span-1x2', 'span-2x2'];
      document.querySelectorAll('.photo').forEach(photo => {
        const randomClass = spanClasses[Math.floor(Math.random() * spanClasses.length)];
        photo.classList.add(randomClass);
      });
    });

    // 🎮 Simple Lightbox
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = lightbox.querySelector('img');

    document.querySelectorAll('.photo img').forEach(img => {
      img.addEventListener('click', () => {
        lightboxImg.src = img.src;
        lightbox.classList.add('active');
      });
    });

    lightbox.addEventListener('click', () => {
      lightbox.classList.remove('active');
    });

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') lightbox.classList.remove('active');
    });
  </script>
  <script>
    const repoURL = "https://raw.githubusercontent.com/pawanlimbb-alt/hlywor/main/_data/comments/blog1/";

    async function loadComments() {
      try {
        const response = await fetch(repoURL);
        if (!response.ok) {
          document.getElementById("comments-list").innerText = "No comments yet!";
          return;
        }

        const text = await response.text();
        const parser = new DOMParser();
        const html = parser.parseFromString(text, "text/html");
        const links = Array.from(html.querySelectorAll('a'))
          .filter(a => a.href.endsWith('.json'))
          .map(a => a.href);

        if (links.length === 0) {
          document.getElementById("comments-list").innerText = "No comments yet!";
          return;
        }

        let htmlOutput = "";
        for (const link of links.reverse()) {
          const res = await fetch(link);
          const comment = await res.json();
          htmlOutput += `
            <div class="comment">
              <p><strong>${comment.name}</strong></p>
              <p>${comment.message}</p>
            </div>
          `;
        }
        document.getElementById("comments-list").innerHTML = htmlOutput;
      } catch (err) {
        document.getElementById("comments-list").innerText = "Error loading comments.";
      }
    }

    loadComments();

    // Optional: Message after submitting
    document.getElementById("comment-form").addEventListener("submit", function () {
      document.getElementById("comment-status").innerText =
        "Submitting... Your comment will appear after a few seconds.";
    });
  </script>

</body>

</html>